<style>
    .notification-kw {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: #ffffff;
        color: #000;
        padding: 15px 20px;
        border-radius: 12px;
        font-size: 16px;
        display: none;
        align-items: center;
        gap: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.25);
        animation: fadeInOutKw 5s ease;
        font-family: Arial, sans-serif;
        z-index: 999999;
        max-width: 90%;
    }

    .notif-img-kw {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #eee;
    }

    .notif-text-kw {
        font-weight: bold;
        line-height: 1.3;
    }

    @keyframes fadeInOutKw {
        0% {opacity: 0; transform: translateY(20px);}
        10% {opacity: 1; transform: translateY(0);}
        80% {opacity: 1;}
        100% {opacity: 0; transform: translateY(20px);}
    }

    @media (max-width: 600px) {
        .notification-kw {
            bottom: 10px;
            left: 10px;
            padding: 10px 14px;
            border-radius: 10px;
            font-size: 14px;
            gap: 10px;
        }
        .notif-img-kw {
            width: 38px;
            height: 38px;
        }
    }
</style>


<audio id="soundKw" preload="auto">
    <source src="https://www.myinstants.com/media/sounds/cash-register.mp3" type="audio/mpeg">
</audio>

<div id="notifKw" class="notification-kw">
    <img id="notifImgKw" class="notif-img-kw" src="">
    <div class="notif-text-kw">
        <span id="notifNameKw"></span><br>
        <span id="notifLocKw" style="font-weight: normal; font-size: 14px;"></span>
    </div>
</div>

<script>
(function(){

    // üî• Buscar nome + foto + cidade + estado
    async function gerarPessoaKw() {
        const modos = ["brasil", "estrangeiro"];
        const modo = modos[Math.floor(Math.random() * modos.length)];

        // üáßüá∑ BRASIL ‚Äì cidade e estado fake por√©m plaus√≠veis
        if (modo === "brasil") {
            const nomes = ["Jo√£o", "Maria", "Pedro", "Ana", "Lucas", "Carla", "Diego", "Fernanda", "Ricardo", "Paula"];
            const sobrenomes = ["Silva", "Souza", "Mendes", "Ferreira", "Dias", "Castro", "Ribeiro", "Gomes", "Martins"];

            const cidades = [
                {cidade:"S√£o Paulo", estado:"SP"},
                {cidade:"Rio de Janeiro", estado:"RJ"},
                {cidade:"Belo Horizonte", estado:"MG"},
                {cidade:"Curitiba", estado:"PR"},
                {cidade:"Salvador", estado:"BA"},
                {cidade:"Fortaleza", estado:"CE"},
                {cidade:"Bras√≠lia", estado:"DF"},
                {cidade:"Recife", estado:"PE"}
            ];

            const nome = nomes[Math.floor(Math.random() * nomes.length)] + " " +
                          sobrenomes[Math.floor(Math.random() * sobrenomes.length)];

            const loc = cidades[Math.floor(Math.random() * cidades.length)];

            return {
                nome,
                foto: gerarFotoFallbackKw(),
                cidade: loc.cidade,
                estado: loc.estado
            };
        }

        // üåç RANDOMUSER ‚Äì nome + foto + cidade + estado real
        const req = await fetch("https://randomuser.me/api/?nat=us,ca,gb,au");
        const data = await req.json();
        const u = data.results[0];

        return {
            nome: `${u.name.first} ${u.name.last}`,
            foto: u.picture.medium,
            cidade: u.location.city,
            estado: u.location.state
        };
    }

    // Foto fallback
    function gerarFotoFallbackKw() {
        const fotos = [
            "https://randomuser.me/api/portraits/men/11.jpg",
            "https://randomuser.me/api/portraits/men/43.jpg",
            "https://randomuser.me/api/portraits/women/22.jpg",
            "https://randomuser.me/api/portraits/women/50.jpg",
            "https://randomuser.me/api/portraits/men/31.jpg"
        ];
        return fotos[Math.floor(Math.random() * fotos.length)];
    }


    // ‚è≥ Mostra *1* notifica√ß√£o
    async function mostrarUmaNotificacaoKw() {
        try {
            const pessoa = await gerarPessoaKw();

            document.getElementById("notifNameKw").innerText = pessoa.nome + " realizou uma compra!";
            document.getElementById("notifLocKw").innerText = pessoa.cidade + " - " + pessoa.estado;
            document.getElementById("notifImgKw").src = pessoa.foto;

            const caixa = document.getElementById("notifKw");
            caixa.style.display = "flex";

            // som
            const audio = document.getElementById("soundKw");
            audio.currentTime = 0;
            audio.play().catch(()=>{});

            setTimeout(() => {
                caixa.style.display = "none";
            }, 5000);

        } catch(e) {
            console.log("Erro:", e);
        }
    }

    // ‚ö° Mostra 5 notifica√ß√µes seguidas
    async function exibirSequenciaKw() {
        for (let i = 0; i < 5; i++) {
            await mostrarUmaNotificacaoKw();
            await new Promise(r => setTimeout(r, 5200)); // espera a notifica√ß√£o morrer
        }
    }

    // Primeira sequ√™ncia 3 segundos ap√≥s carregar
    setTimeout(exibirSequenciaKw, 3000);

    // Repete sequ√™ncia a cada 1 minuto
    setInterval(exibirSequenciaKw, 60000);

})();
</script>
